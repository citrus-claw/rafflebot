(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[389],{333:(e,t,a)=>{"use strict";a.d(t,{Ih:()=>l,cd:()=>x,PQ:()=>f,ps:()=>u,$m:()=>c,mm:()=>m,gg:()=>d,kP:()=>o});var n=a(6465);let s=JSON.parse('{"address":"HrfWNd6ayFHgf23XxLpHtBKY9TfjviiwBpXtdis8MDGU","metadata":{"name":"rafflebot","version":"0.1.0","spec":"0.1.0","description":"AI agent that creates and runs provably fair raffles on Solana"},"instructions":[{"name":"buy_tickets","docs":["Buy tickets for a raffle"],"discriminator":[48,16,122,137,24,214,198,58],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"entry","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,110,116,114,121]},{"kind":"account","path":"raffle"},{"kind":"account","path":"buyer"}]}},{"name":"escrow","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,115,99,114,111,119]},{"kind":"account","path":"raffle"}]}},{"name":"buyer_token_account","writable":true},{"name":"token_mint"},{"name":"buyer","writable":true,"signer":true},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"num_tickets","type":"u32"}]},{"name":"cancel_raffle","docs":["Cancel raffle and enable refunds (authority only, or auto after deadline if threshold not met)"],"discriminator":[135,191,223,141,192,186,234,254],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"authority","docs":["Can be authority OR anyone (if deadline passed + threshold not met)"],"signer":true}],"args":[]},{"name":"claim_prize","docs":["Claim prize (winner calls this with their entry)"],"discriminator":[157,233,139,121,246,62,234,235],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"winner_entry","pda":{"seeds":[{"kind":"const","value":[101,110,116,114,121]},{"kind":"account","path":"raffle"},{"kind":"account","path":"winner"}]}},{"name":"escrow","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,115,99,114,111,119]},{"kind":"account","path":"raffle"}]}},{"name":"winner_token_account","writable":true},{"name":"platform_token_account","writable":true},{"name":"token_mint"},{"name":"winner"},{"name":"token_program"}],"args":[]},{"name":"claim_refund","docs":["Claim refund (for cancelled raffles)"],"discriminator":[15,16,30,161,255,228,97,60],"accounts":[{"name":"raffle","pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"entry","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,110,116,114,121]},{"kind":"account","path":"raffle"},{"kind":"account","path":"buyer"}]}},{"name":"escrow","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,115,99,114,111,119]},{"kind":"account","path":"raffle"}]}},{"name":"buyer_token_account","writable":true},{"name":"token_mint"},{"name":"buyer"},{"name":"token_program"}],"args":[]},{"name":"commit_draw","docs":["Phase 1: Commit to Switchboard randomness (authority calls after deadline)","Bundle this instruction with Switchboard\'s commitIx in the same tx"],"discriminator":[210,106,32,68,253,95,229,1],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"authority","signer":true,"relations":["raffle"]},{"name":"randomness_account"}],"args":[]},{"name":"create_raffle","docs":["Create a new raffle (agent-only in practice, but permissionless on-chain)"],"discriminator":[226,206,159,34,213,207,98,126],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"authority"},{"kind":"arg","path":"name"}]}},{"name":"escrow","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,115,99,114,111,119]},{"kind":"account","path":"raffle"}]}},{"name":"token_mint","docs":["The SPL token mint (e.g., USDC)"]},{"name":"platform_wallet","docs":["Platform wallet to receive fees"]},{"name":"authority","writable":true,"signer":true},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"}],"args":[{"name":"name","type":"string"},{"name":"ticket_price","type":"u64"},{"name":"min_pot","type":"u64"},{"name":"max_per_wallet","type":"u32"},{"name":"end_time","type":"i64"}]},{"name":"settle_draw","docs":["Phase 2: Settle draw using revealed Switchboard randomness","Bundle this instruction with Switchboard\'s revealIx in the same tx"],"discriminator":[175,154,75,30,118,117,107,194],"accounts":[{"name":"raffle","writable":true,"pda":{"seeds":[{"kind":"const","value":[114,97,102,102,108,101]},{"kind":"account","path":"raffle.authority","account":"Raffle"},{"kind":"account","path":"raffle.name","account":"Raffle"}]}},{"name":"authority","signer":true,"relations":["raffle"]},{"name":"randomness_account"}],"args":[]}],"accounts":[{"name":"Entry","discriminator":[63,18,152,113,215,246,221,250]},{"name":"Raffle","discriminator":[143,133,63,173,138,10,142,200]}],"errors":[{"code":6000,"name":"InvalidEndTime","msg":"End time must be in the future"},{"code":6001,"name":"InvalidTicketPrice","msg":"Ticket price must be greater than 0"},{"code":6002,"name":"InvalidMinPot","msg":"Minimum pot must be greater than 0"},{"code":6003,"name":"MinPotTooLow","msg":"Minimum pot must be >= ticket price"},{"code":6004,"name":"InvalidName","msg":"Name must be 1-32 characters"},{"code":6005,"name":"RaffleNotActive","msg":"Raffle is not active"},{"code":6006,"name":"RaffleClosed","msg":"Raffle has ended"},{"code":6007,"name":"InvalidTicketCount","msg":"Invalid ticket count"},{"code":6008,"name":"MaxTicketsExceeded","msg":"Maximum tickets per wallet exceeded"},{"code":6009,"name":"Overflow","msg":"Arithmetic overflow"},{"code":6010,"name":"RaffleNotEnded","msg":"Raffle has not ended yet"},{"code":6011,"name":"NoTickets","msg":"No tickets sold"},{"code":6012,"name":"ThresholdNotMet","msg":"Minimum pot threshold not met"},{"code":6013,"name":"DrawNotComplete","msg":"Draw not complete"},{"code":6014,"name":"NoWinnerDrawn","msg":"No winner drawn"},{"code":6015,"name":"NotWinner","msg":"Not the winner"},{"code":6016,"name":"CannotCancel","msg":"Cannot cancel raffle"},{"code":6017,"name":"RaffleNotCancelled","msg":"Raffle is not cancelled"},{"code":6018,"name":"NotEntryOwner","msg":"Not the entry owner"},{"code":6019,"name":"AlreadyRefunded","msg":"Already refunded"},{"code":6020,"name":"InvalidRandomnessAccount","msg":"Invalid randomness account"},{"code":6021,"name":"InvalidRandomnessAccountOwner","msg":"Invalid randomness account owner"},{"code":6022,"name":"RandomnessExpired","msg":"Randomness has expired"},{"code":6023,"name":"RandomnessAlreadyRevealed","msg":"Randomness already revealed"},{"code":6024,"name":"RandomnessNotResolved","msg":"Randomness not yet resolved"},{"code":6025,"name":"DrawNotCommitted","msg":"Draw not committed yet"}],"types":[{"name":"Entry","type":{"kind":"struct","fields":[{"name":"raffle","type":"pubkey"},{"name":"buyer","type":"pubkey"},{"name":"start_ticket_index","type":"u32"},{"name":"num_tickets","type":"u32"},{"name":"is_initialized","type":"bool"},{"name":"refunded","type":"bool"},{"name":"bump","type":"u8"}]}},{"name":"Raffle","type":{"kind":"struct","fields":[{"name":"authority","type":"pubkey"},{"name":"name","type":"string"},{"name":"token_mint","type":"pubkey"},{"name":"escrow","type":"pubkey"},{"name":"platform_wallet","type":"pubkey"},{"name":"ticket_price","type":"u64"},{"name":"min_pot","type":"u64"},{"name":"max_per_wallet","type":"u32"},{"name":"end_time","type":"i64"},{"name":"total_tickets","type":"u32"},{"name":"total_pot","type":"u64"},{"name":"status","type":{"defined":{"name":"RaffleStatus"}}},{"name":"winner","type":{"option":"pubkey"}},{"name":"winning_ticket","type":{"option":"u32"}},{"name":"randomness","type":{"option":{"array":["u8",32]}}},{"name":"randomness_account","type":{"option":"pubkey"}},{"name":"commit_slot","type":{"option":"u64"}},{"name":"created_at","type":"i64"},{"name":"bump","type":"u8"},{"name":"escrow_bump","type":"u8"}]}},{"name":"RaffleStatus","type":{"kind":"enum","variants":[{"name":"Active"},{"name":"DrawCommitted"},{"name":"DrawComplete"},{"name":"Claimed"},{"name":"Cancelled"}]}}]}');var i=a(2463).Buffer;let l=s,r=new n.PublicKey("HrfWNd6ayFHgf23XxLpHtBKY9TfjviiwBpXtdis8MDGU");function c(e){return!!e.active}function o(e){return!!e.drawComplete}function d(e){return!!e.claimed}function m(e){return!!e.cancelled}function u(e){return e.active?"Active":e.drawCommitted?"Drawing...":e.drawComplete?"Winner Drawn":e.claimed?"Claimed":e.cancelled?"Cancelled":"Unknown"}function x(e,t){return n.PublicKey.findProgramAddressSync([i.from("entry"),e.toBuffer(),t.toBuffer()],r)}function f(e){return n.PublicKey.findProgramAddressSync([i.from("escrow"),e.toBuffer()],r)}},1083:(e,t,a)=>{"use strict";a.d(t,{MM:()=>d,Nr:()=>c,Wt:()=>o});var n=a(7091),s=a(9738),i=a(875),l=a(7492),r=a(333);function c(){let{program:e,connection:t}=(0,l.g)(),[a,s]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0),[o,d]=(0,n.useState)(null),m=(0,n.useCallback)(async()=>{try{c(!0);let t=await e.account.raffle.all();s(t.map(e=>({publicKey:e.publicKey,account:e.account}))),d(null)}catch(e){console.error("Failed to fetch raffles:",e),d(e)}finally{c(!1)}},[e]);(0,n.useEffect)(()=>{m()},[m]);let u=a.filter(e=>(0,r.$m)(e.account.status)),x=a.filter(e=>!(0,r.$m)(e.account.status));return{raffles:a,activeRaffles:u,endedRaffles:x,loading:i,error:o,refetch:m}}function o(e){let{program:t,connection:a}=(0,l.g)(),[s,i]=(0,n.useState)(null),[r,c]=(0,n.useState)(!0),[o,d]=(0,n.useState)(null),m=(0,n.useCallback)(async()=>{if(e)try{c(!0);let a=await t.account.raffle.fetch(e);i(a),d(null)}catch(e){console.error("Failed to fetch raffle:",e),d(e)}finally{c(!1)}},[t,e]);return(0,n.useEffect)(()=>{m()},[m]),{raffle:s,loading:r,error:o,refetch:m}}function d(e){let{connection:t}=(0,s.w)(),{publicKey:a}=(0,i.v)(),{program:c}=(0,l.g)(),[o,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(!0),x=(0,n.useCallback)(async()=>{if(!e||!a){d(null),u(!1);return}try{u(!0);let[t]=(0,r.cd)(e,a),n=await c.account.entry.fetch(t);d(n)}catch(e){d(null)}finally{u(!1)}},[c,e,a]);return(0,n.useEffect)(()=>{x()},[x]),{entry:o,loading:m,refetch:x}}},2021:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var n=a(5695),s=a(421);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,n.$)(t))}},2022:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var n=a(2115),s=a(4276),i=a(7091),l=a(6465),r=a(875),c=a(1083),o=a(7014),d=a(8128),m=a(7492),u=a(333),x=a(7235),f=a.n(x),p=a(9389),h=a(4342),b=a(2021),y=a(6459),k=a(2463).Buffer;function w(e){let{label:t,value:a,accent:s}=e;return(0,n.jsxs)("div",{className:"flex items-baseline justify-between border-b border-ink/5 py-2.5",children:[(0,n.jsx)("span",{className:"text-xs text-muted",children:t}),(0,n.jsx)("span",{className:(0,b.cn)("text-xs font-semibold",s?"text-carnival-red":"text-ink"),children:a})]})}function g(){let e=(0,s.useParams)().id,[t,a]=(0,i.useState)(null),[x,g]=(0,i.useState)(1),[v,j]=(0,i.useState)(null),[N,P]=(0,i.useState)("overview"),{connected:_}=(0,r.v)(),{raffle:T,loading:S,error:R,refetch:B}=(0,c.Wt)(t),{entry:M,refetch:C}=(0,c.MM)(t),{buyTickets:A,loading:W,error:E}=function(){let{program:e,provider:t}=(0,m._)(),{publicKey:a,sendTransaction:n}=(0,r.v)(),[s,c]=(0,i.useState)(!1),[x,f]=(0,i.useState)(null);return{buyTickets:(0,i.useCallback)(async(s,i,r)=>{if(!e||!t||!a)return f(Error("Wallet not connected")),null;try{c(!0),f(null);let[m]=(0,u.cd)(s,a),[x]=(0,u.PQ)(s),p=await (0,o.Ob)(i.tokenMint,a),h=await e.methods.buyTickets(r).accounts({raffle:s,entry:m,escrow:x,buyerTokenAccount:p,tokenMint:i.tokenMint,buyer:a,tokenProgram:d.x5,systemProgram:l.SystemProgram.programId}).instruction(),b=new l.Transaction().add(h);b.feePayer=a,b.recentBlockhash=(await t.connection.getLatestBlockhash()).blockhash;let y=await n(b,t.connection);return await t.connection.confirmTransaction(y,"confirmed"),y}catch(e){return console.error("Buy tickets failed:",e),f(e),null}finally{c(!1)}},[e,t,a,n]),loading:s,error:x}}();(0,i.useEffect)(()=>{try{a(new l.PublicKey(e))}catch(e){a(null)}},[e]);let I=async()=>{if(!t||!T)return;j("Sending transaction...");let e=await A(t,T,x);e?(j("Success! Tx: ".concat(e.slice(0,8),"...")),B(),C(),setTimeout(()=>j(null),5e3)):j("Transaction failed")},D=!!T&&(0,u.kP)(T.status);if(!t)return(0,n.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,n.jsx)("p",{className:"font-display text-xs text-carnival-red",children:"Invalid raffle ID"}),(0,n.jsx)(f(),{href:"/",className:"mt-4 block text-xs text-ink/60 hover:text-ink",children:"← Back to raffles"})]});if(S)return(0,n.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,n.jsx)(p.A,{size:48,className:"mx-auto mb-4 animate-bounce text-carnival-red"}),(0,n.jsx)("p",{className:"font-display text-xs uppercase tracking-widest text-ink/60",children:"Loading raffle..."})]});if(R||!T)return(0,n.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,n.jsx)("p",{className:"font-display text-xs text-carnival-red",children:"Failed to load raffle"}),(0,n.jsx)("p",{className:"mt-2 text-[10px] text-ink/60",children:null==R?void 0:R.message}),(0,n.jsx)(f(),{href:"/",className:"mt-4 block text-xs text-ink/60 hover:text-ink",children:"← Back to raffles"})]});let V=(0,u.$m)(T.status),F=T.minPot.toNumber()>0?Math.min(100,T.totalPot.toNumber()/T.minPot.toNumber()*100):100,K=T.maxPerWallet>0?T.maxPerWallet-((null==M?void 0:M.numTickets)||0):100;return(0,n.jsxs)("div",{className:"mx-auto max-w-2xl px-6 py-8",children:[(0,n.jsxs)(f(),{href:"/",className:"mb-6 inline-flex items-center gap-1 text-xs text-ink/60 transition-colors hover:text-carnival-red",children:[(0,n.jsx)(h.A,{size:14}),"Back to raffles"]}),(0,n.jsxs)("div",{className:"mb-1 flex items-center gap-3",children:[(0,n.jsx)("h1",{className:"font-display text-2xl text-ink md:text-3xl",children:T.name}),(0,n.jsx)("span",{className:(0,b.cn)("rounded-full px-3 py-1 text-[10px] font-bold uppercase",V?"bg-emerald-100 text-emerald-700":"bg-stone-200 text-stone-500"),children:(0,u.ps)(T.status)})]}),(0,n.jsx)("p",{className:"mb-5 font-mono text-[10px] text-ink/40",children:t.toBase58()}),(0,n.jsxs)("div",{className:"mb-5 flex overflow-hidden rounded-2xl shadow-lg",children:[(0,n.jsxs)("div",{className:(0,b.cn)("flex-1 p-4 text-center text-white",V?"bg-carnival-red":"bg-stone-500"),children:[(0,n.jsx)("div",{className:"text-[9px] font-bold uppercase tracking-wider opacity-70",children:V?"Prize Pool":"Final Pool"}),(0,n.jsx)("div",{className:"text-xl font-bold",children:(0,y.Vx)(T.totalPot)})]}),(0,n.jsxs)("div",{className:(0,b.cn)("flex-1 p-4 text-center text-white",V?"bg-carnival-blue":"bg-stone-400"),children:[(0,n.jsx)("div",{className:"text-[9px] font-bold uppercase tracking-wider opacity-70",children:V?"Ticket Price":"Tickets Sold"}),(0,n.jsx)("div",{className:"text-xl font-bold",children:V?(0,y.Vx)(T.ticketPrice):T.totalTickets.toLocaleString()})]}),(0,n.jsxs)("div",{className:(0,b.cn)("flex-1 p-4 text-center",V?"bg-ink text-white":"bg-gold text-ink"),children:[(0,n.jsx)("div",{className:"text-[9px] font-bold uppercase tracking-wider opacity-70",children:V?"Time Left":"Winner Payout"}),(0,n.jsx)("div",{className:"text-xl font-bold",children:V?(0,y.$B)(T.endTime):(0,y.Vx)(T.totalPot.muln(9).divn(10))})]})]}),!V&&T.winner&&(0,n.jsxs)("div",{className:"mb-5 overflow-hidden rounded-2xl bg-white shadow-lg",children:[(0,n.jsxs)("div",{className:"py-6 text-center",children:[(0,n.jsx)("div",{className:"text-[11px] font-bold uppercase tracking-widest text-muted",children:"Winner"}),(0,n.jsxs)("div",{className:"mt-1 font-display text-xl text-gold",children:[T.winner.toBase58().slice(0,4),"...",T.winner.toBase58().slice(-4)]}),null!==T.winningTicket&&(0,n.jsxs)("div",{className:"mt-1 text-xs text-muted",children:["Winning Ticket:"," ",(0,n.jsxs)("strong",{children:["No.",T.winningTicket]})]})]}),(0,n.jsx)("div",{className:"border-t border-ink/5 p-4 text-center text-[10px] font-bold text-gold",children:D?"Payout processing automatically by agent":"Prize payout complete"})]}),V&&(0,n.jsxs)("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:[(0,n.jsx)("div",{className:"px-6 pt-5",children:(0,n.jsx)("div",{className:"flex gap-0.5 rounded-xl bg-ink/5 p-1",children:[{key:"overview",label:"Overview"},{key:"buy",label:"Buy Tickets"},{key:"verification",label:"Verification"}].map(e=>(0,n.jsx)("button",{onClick:()=>P(e.key),className:(0,b.cn)("flex-1 rounded-lg py-2 text-[11px] font-semibold uppercase tracking-wider transition-all",N===e.key?"bg-white text-ink shadow-sm":"text-muted hover:text-ink"),children:e.label},e.key))})}),"overview"===N&&(0,n.jsxs)("div",{className:"px-6 pb-6 pt-5",children:[(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsxs)("div",{className:"mb-1.5 flex items-center justify-between text-xs",children:[(0,n.jsx)("span",{className:"text-muted",children:"Progress to minimum"}),(0,n.jsxs)("span",{className:"font-semibold",children:[Math.round(F),"%"]})]}),(0,n.jsx)("div",{className:"h-2.5 overflow-hidden rounded-full bg-ink/5",children:(0,n.jsx)("div",{className:"h-full rounded-full bg-gradient-to-r from-gold to-amber-400 transition-all",style:{width:"".concat(F,"%")}})}),(0,n.jsxs)("div",{className:"mt-1 flex justify-between text-[11px] text-muted",children:[(0,n.jsxs)("span",{children:[(0,y.Vx)(T.totalPot)," raised"]}),(0,n.jsxs)("span",{children:[(0,y.Vx)(T.minPot)," target"]})]})]}),(0,n.jsx)(w,{label:"Tickets Sold",value:T.totalTickets.toString()}),(0,n.jsx)(w,{label:"Max / Wallet",value:T.maxPerWallet>0?T.maxPerWallet.toString():"∞"}),(0,n.jsx)(w,{label:"Winner Share",value:"90%"}),(0,n.jsx)(w,{label:"Protocol Fee",value:"10%"}),(0,n.jsx)(w,{label:"Time Left",value:(0,y.$B)(T.endTime)}),M&&M.numTickets>0&&(0,n.jsxs)("div",{className:"mt-5 rounded-xl border-l-[3px] border-gold bg-gold/5 p-4",children:[(0,n.jsx)("div",{className:"mb-2 text-[11px] font-bold uppercase tracking-wider text-gold",children:"Your Entry"}),(0,n.jsxs)("div",{className:"flex gap-5 text-[13px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted",children:"Tickets:"})," ",(0,n.jsx)("strong",{children:M.numTickets})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted",children:"Range:"})," ",(0,n.jsxs)("strong",{children:["No.",M.startTicketIndex,"–",M.startTicketIndex+M.numTickets-1]})]}),T.totalTickets>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-muted",children:"Chance:"})," ",(0,n.jsxs)("strong",{className:"text-carnival-red",children:[(M.numTickets/T.totalTickets*100).toFixed(1),"%"]})]})]})]})]}),"buy"===N&&(0,n.jsx)("div",{className:"px-6 pb-6 pt-5",children:_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-5 text-center",children:[(0,n.jsx)("div",{className:"text-xs text-muted",children:"Ticket Price"}),(0,n.jsx)("div",{className:"font-display text-3xl text-carnival-red",children:(0,y.Vx)(T.ticketPrice)})]}),(0,n.jsxs)("div",{className:"mb-4 flex items-center justify-center gap-2.5",children:[(0,n.jsx)("span",{className:"text-xs text-muted",children:"Qty:"}),(0,n.jsx)("input",{type:"number",min:1,max:K,value:x,onChange:e=>g(Math.max(1,Math.min(K,parseInt(e.target.value)||1))),className:"w-20 rounded-lg bg-ink/5 px-3 py-2 text-center font-mono text-lg font-bold text-carnival-red focus:outline-none focus:ring-2 focus:ring-gold"}),[1,5,10].map(e=>(0,n.jsxs)("button",{onClick:()=>g(Math.min(e,K)),className:(0,b.cn)("rounded-lg px-3 py-2 text-[10px] font-bold transition-all",x===e?"bg-carnival-red text-white":"bg-ink/5 text-ink/60 hover:bg-ink/10"),children:[e,"\xd7"]},e))]}),(0,n.jsxs)("div",{className:"mb-4 flex items-center justify-between rounded-xl bg-ink/[0.03] px-4 py-3 text-[13px]",children:[(0,n.jsxs)("span",{className:"text-muted",children:[x," \xd7 ",(0,y.Vx)(T.ticketPrice)]}),(0,n.jsxs)("span",{className:"font-bold",children:["= ",(0,y.Vx)(T.ticketPrice.muln(x))]})]}),(0,n.jsx)("button",{onClick:I,disabled:W||K<=0,className:"w-full rounded-xl bg-carnival-red py-3 text-xs font-bold uppercase tracking-wider text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:opacity-50",children:W?"Processing...":"Buy ".concat(x," Ticket").concat(x>1?"s":"")}),K<=0&&(0,n.jsxs)("p",{className:"mt-2 text-center text-[10px] text-carnival-red",children:["Max tickets per wallet reached (",T.maxPerWallet,")"]}),v&&(0,n.jsx)("p",{className:(0,b.cn)("mt-3 text-center text-[10px] font-medium",v.includes("Success")?"text-gold":v.includes("failed")?"text-carnival-red":"text-ink/60"),children:v}),E&&(0,n.jsx)("p",{className:"mt-2 text-center text-[10px] text-carnival-red",children:E.message}),(0,n.jsxs)("div",{className:"mt-3 text-center text-[11px] text-muted",children:["Max ",T.maxPerWallet>0?T.maxPerWallet:"∞"," ","tickets per wallet"]})]}):(0,n.jsx)("div",{className:"py-8 text-center",children:(0,n.jsx)("p",{className:"font-display text-sm text-ink/60",children:"Connect your wallet to buy tickets"})})}),"verification"===N&&(0,n.jsxs)("div",{className:"px-6 pb-6 pt-5",children:[(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("div",{className:"mb-3 text-[11px] font-bold uppercase tracking-wider text-muted",children:"Fairness"}),(0,n.jsx)(w,{label:"RNG Method",value:"Switchboard VRF"}),(0,n.jsx)(w,{label:"Winner Share",value:"90%",accent:!0}),(0,n.jsx)(w,{label:"Protocol Fee",value:"10%"}),(0,n.jsx)(w,{label:"Network",value:"Solana Devnet"})]}),(0,n.jsxs)("div",{className:"rounded-xl bg-ink p-4 text-white",children:[(0,n.jsx)("div",{className:"mb-3 text-[11px] font-bold uppercase tracking-wider text-gold",children:"On-Chain Accounts"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2.5 text-[11px]",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"Raffle Account"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[t.toBase58().slice(0,8),"...",t.toBase58().slice(-4)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"Token Mint"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[T.tokenMint.toBase58().slice(0,8),"...",T.tokenMint.toBase58().slice(-4)]})]}),T.randomnessAccount&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"VRF Account"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[T.randomnessAccount.toBase58().slice(0,8),"...",T.randomnessAccount.toBase58().slice(-4)]})]}),T.randomness&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"Entropy"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[k.from(T.randomness).toString("hex").slice(0,16),"…"]})]})]})]})]})]}),!V&&(0,n.jsxs)("div",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:[(0,n.jsxs)("div",{className:"px-6 py-5",children:[(0,n.jsx)(w,{label:"Prize Pool",value:(0,y.Vx)(T.totalPot),accent:!0}),(0,n.jsx)(w,{label:"Ticket Price",value:(0,y.Vx)(T.ticketPrice)}),(0,n.jsx)(w,{label:"Tickets Sold",value:T.totalTickets.toString()}),(0,n.jsx)(w,{label:"Max / Wallet",value:T.maxPerWallet>0?T.maxPerWallet.toString():"∞"}),(0,n.jsx)(w,{label:"Winner Share",value:"90%",accent:!0}),(0,n.jsx)(w,{label:"Ended",value:(0,y.r6)(T.endTime)})]}),(0,n.jsxs)("div",{className:"border-t border-ink/5 bg-ink p-4 text-white",children:[(0,n.jsx)("div",{className:"mb-3 text-[11px] font-bold uppercase tracking-wider text-gold",children:"On-Chain Verification"}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 text-[11px]",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"Raffle"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[t.toBase58().slice(0,8),"...",t.toBase58().slice(-4)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"Token Mint"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[T.tokenMint.toBase58().slice(0,8),"...",T.tokenMint.toBase58().slice(-4)]})]}),T.randomnessAccount&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-white/40",children:"VRF"}),(0,n.jsxs)("span",{className:"font-mono text-white/80",children:[T.randomnessAccount.toBase58().slice(0,8),"...",T.randomnessAccount.toBase58().slice(-4)]})]})]})]})]})]})}},3514:()=>{},5066:()=>{},6209:(e,t,a)=>{Promise.resolve().then(a.bind(a,2022))},6459:(e,t,a)=>{"use strict";function n(e){return(e.toNumber()/1e6).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2})}function s(e){let t=Math.floor(Date.now()/1e3),a=e.toNumber()-t;if(a<=0)return"Ended";let n=Math.floor(a/86400),s=Math.floor(a%86400/3600),i=Math.floor(a%3600/60);return n>0?"".concat(n,"d ").concat(s,"h"):s>0?"".concat(s,"h ").concat(i,"m"):"".concat(i,"m")}function i(e){return new Date(1e3*e.toNumber()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function l(e){return new Date(1e3*e.toNumber()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function r(e){return"".concat(e.slice(0,4),"…").concat(e.slice(-4))}a.d(t,{$B:()=>s,Vx:()=>n,Wr:()=>r,Yq:()=>i,r6:()=>l})},7492:(e,t,a)=>{"use strict";a.d(t,{_:()=>o,g:()=>d});var n=a(7091),s=a(9738),i=a(875),l=a(1084),r=a(6465),c=a(333);function o(){let{connection:e}=(0,s.w)(),t=(0,i.v)(),a=(0,n.useMemo)(()=>{if(!t.publicKey||!t.signTransaction||!t.signAllTransactions)return null;let a={publicKey:t.publicKey,signTransaction:t.signTransaction,signAllTransactions:t.signAllTransactions};return new l.NQ(e,a,{commitment:"confirmed"})},[e,t]);return{program:(0,n.useMemo)(()=>a?((0,l.U0)(a),new l.BP(c.Ih,a)):null,[a]),provider:a,connection:e,wallet:t}}function d(){let{connection:e}=(0,s.w)();return{program:(0,n.useMemo)(()=>{let t={publicKey:r.PublicKey.default,signTransaction:async()=>{throw Error("Read-only")},signAllTransactions:async()=>{throw Error("Read-only")}},a=new l.NQ(e,t,{commitment:"confirmed"});return new l.BP(c.Ih,a)},[e]),connection:e}}}},e=>{e.O(0,[692,891,346,24,696,797,483,235,984,523,657,358],()=>e(e.s=6209)),_N_E=e.O()}]);